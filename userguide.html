<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <title>DIFI - DCAT Harvester</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/jumbotron.css" rel="stylesheet">

    <style>
        li.active{
            text-decoration:underline;
        }
    </style>
</head>

<body data-spy="scroll" data-target="#myScrollspy" data-offset="20">

<nav class="navbar navbar-static-top navbar-dark bg-inverse">
    <a class="navbar-brand" href="index.html">DCAT Harvester</a>
    <ul class="nav navbar-nav">
        <li class="nav-item">
            <a class="nav-link" href="index.html">Front page</a>
        </li>
        <li class="nav-item ">
            <a class="nav-link active" href="userguide.html">User guide</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="architecture.html">Architecture</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="devguide.html">Dev guide</a>
        </li>
    </ul>
</nav>


<div class="container">
    <!-- Example row of columns -->


    <div class="row" style="padding-top:20px">


        <div class="col-xs-12 col-md-9  bd-content">
            <h2 id="Login">Login</h2>
            <hr style="margin-top: 0px"/>

            <p>If this is the first time you fire up the system, you should go to <a href="http://localhost:8080/dcat-admin-webapp/login">http://localhost:8080/dcat-admin-webapp/login</a> in order to login</p>
            <img src="images/login.png" style="width:100%"/>
            <p>The default username and password are:</p>
            <table class="table">
                <tr>
                    <td>Username:</td>
                    <td>test_admin</td>
                </tr>
                <tr>
                    <td>Password:</td>
                    <td>password</td>
                </tr>
            </table>

            <p>If you were provided with your own username and password, please use those instead.</p>

            <h2 id="Add-data-source">Add data source</h2>
            <hr style="margin-top: 0px"/>

            <p>When you have logged into you account you will be presented with a form to add new data source and a list of your current data sources.
                Do not worry if you do not see the "Users admin" button, it just means you are not an admin of the system.</p>
            <img src="images/addDataSource.png" style="width:100%"/>

            <p>To add your first data source you will need to know the URL to that data source. I'm going to use a the following test file <a
                    href="https://raw.githubusercontent.com/EmidioStani/dcat-ap_validator/master/tests-data/test-perfect.rdf">https://raw.githubusercontent.com/EmidioStani/dcat-ap_validator/master/tests-data/test-perfect.rdf</a></p>

            <p>Copy the link to your DCAT file (the URL) into the URL field, add a description and an organisation number if you have one. Then click on "Save".</p>
            <img src="images/addDataSource2.png" style="width:100%"/>

            <p>Your data source has now been added to the system. To harvest your data source, just click on the harvest button.
                After harvesting please wait a few seconds and then refresh the page to see if the harvest was successful.</p>
            <img src="images/addDataSource3.png" style="width:100%"/>
            <p>This harvest was successful. If it was unsuccessful the status would say "error". The current status "warning" just means that there is potentially
                more information that could be added to your DCAT file according to the standard.</p>


            <h2 id="Monitor-harvest-status">Monitor harvest status</h2>
            <hr style="margin-top: 0px"/>

            <p>Your DCAT sources, together with information about when they were last harvested and what the status of that harvest was.</p>
            <p>There are multiple possible statuses that your harvest can have:</p>
            <table class="table">
                <tr>
                    <th>Status</th>
                    <th>Description</th>

                </tr>
                <tr>
                    <td>ok</td>
                    <td>Everything was ok.</td>

                </tr>
                <tr>
                    <td>warning</td>
                    <td>Your data is correct, but could be even better.</td>

                </tr>
                <tr>
                    <td>error</td>
                    <td>There was an error either validating your data or for some other reason.</td>

                </tr>
                <tr>
                    <td>syntaxError</td>
                    <td>Your syntax is wrong.</td>

                </tr>
                <tr>
                    <td>networkError</td>
                    <td>The harvester could not download the file specified in the URL.</td>

                </tr>
            </table>

            <p>By clicking on the status you can get a more detailed view of the harvest history and more information about the status. </p>


            <img src="images/harvestHistory.png" style="width:100%"/>

            <h2 id="Understand-errors">Understanding errors</h2>
            <hr style="margin-top: 0px"/>

            <p>There most common errors are validation errors and syntax errors. Information about the error is available by clicking on the status text
                for a particular data source.</p>
            <h4>Validation error</h4>

            <p>Validation errors have a message with the text "ValidationError...". These errors are generated when validating your data against our validation rules.
            </p>


            <img src="images/validationError1.png" style="width:100%"/>

            <p>The above validation error is due to the data is missing a resource of type dcat:Catalog.</p>

            <pre>
ValidationError{
    className=<span style="color:lightcoral">'Catalog'</span>,
    ruleId=<span style="color:lightcoral">112</span>,
    ruleSeverity=<span style="color:lightcoral">error</span>,
    ruleDescription=<span style="color:lightcoral">'dcat:Catalog does not exist.'</span>,
    message=<span style="color:lightcoral">'null'</span>,
    s=<span style="color:lightcoral">null</span>,
    p=<span style="color:lightcoral">null</span>,
    o=<span style="color:lightcoral">null</span>
}
                </pre>

            <p>Some errors will have more details, like the one below.</p>


            <img src="images/validationError2.png" style="width: 100%"/>
            <pre>
ValidationError{
    className=<span style="color:lightcoral">'CatalogRecord'</span>,
    ruleId=<span style="color:lightcoral">143</span>,
    ruleSeverity=<span style="color:lightcoral">error</span>,
    ruleDescription=<span style="color:lightcoral">'dct:modified should be a literal typed as date or dateTime.'</span>,
    message=<span style="color:lightcoral">'null'</span>,
    s=<span style="color:lightcoral">http://nobelprize.org/datarecords/dcat#dr1</span>,
    p=<span style="color:lightcoral">http://purl.org/dc/terms/modified</span>,
    o=<span style="color:lightcoral"><b>2014-09-25</b></span>
}
    </pre>

            <p>Explaining that the "o" (as in the object in the triple: subject predicate object), which is the string "2014-09-25", is the wrong type and should be one of either date or dateTime.</p>

            <h2 id="Errors-in-Kibana">Errors in Kibana</h2>
            <hr style="margin-top: 0px"/>


            <p>The history view of the DCAT source will not show every error message, and doesn't show any of the warnings. To see these you have to click on the
                "Se mer i Kibanan" link.
            </p>


            <svg style="max-width:100%; height:auto; position:relative; " width="2226" height="2130" viewBox="0 0 2500 2500" preserveAspectRatio="both">

                <image x="150" y="150" width="2226" height="2130" xlink:href="images/kibana1.png"/>


              
                <g transform="scale(2.0) rotate(-10) translate(430,690)">
                    <path d="M 571 391 L 390.98 419.42" fill="none" stroke="#1a1a1a" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/>
                    <path d="M 384.31 420.48 L 392.5 414.63 L 390.98 419.42 L 393.9 423.52 Z" fill="#1a1a1a" stroke="#1a1a1a" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/>
                </g>

                <rect height="110" width="440" x="2180" y="1650" style="fill: rgba(255,255,255,0.8)"/>

                <g transform="translate(2200, 1700)">
                    <text x="0" y="0" font-size="3em">Overview of rules</text>
                    <text x="0" y="40" font-size="3em">that are broken</text>
                </g>


                <g transform="scale(2.0) translate(150,1550)">
                    <g transform="rotate(-130) ">
                        <path d="M 571 391 L 390.98 419.42" fill="none" stroke="#1a1a1a" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/>
                        <path d="M 384.31 420.48 L 392.5 414.63 L 390.98 419.42 L 393.9 423.52 Z" fill="#1a1a1a" stroke="#1a1a1a" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/>
                    </g>
                </g>

                <rect height="110" width="360" x="0" y="1600" style="fill: rgba(255,255,255,0.8)"/>


                <g transform="translate(0, 1650)">
                    <text x="0" y="0" font-size="3em">Each instance of</text>
                    <text x="0" y="40" font-size="3em">a broken rule</text>
                </g>

            </svg>

            <p>
                The overview on the bottom right gives a list of all the broken rules, with a count for each rules showing how many times it was broken.
                On the bottom left is the detailed view were you can explore a single instance of such a broken rule.
            </p>

            <p>
                By clicking on a rule on the right, the entire view will filter based on that rules. On the left it is now possible to expand an event to look at the cause of that event.
            </p>

            <img src="images/kibana2.png" style="width:100%"/>

            <h2 id="User-management">User management</h2>
            <hr style="margin-top: 0px"/>

            <p>After loggin in with an admin user, click on the blue "Users Admin" button to get to the admin page.</p>


            <h3>Create a user</h3>

            <img src="images/userAdmin1.png" style="width: 100%"/>

            <p>To create a user, simply fill in the form on the left. There are two roles to choose from.</p>
            <table class="table">
                <tr>
                    <th>Role</th>
                    <th>Description</th>

                </tr>
                <tr>
                    <td>USER</td>
                    <td>
                        <ul>

                            <li>Add dcat sources</li>
                            <li>Edit their own dcat sources</li>
                            <li>Delete their own dcat sources</li>

                        </ul>

                    </td>
                    </td>
                </tr>
                <tr>
                    <td>ADMIN</td>
                    <td>
                        <ul>

                            <li>Add dcat sources</li>
                            <li>Edit their own dcat sources</li>
                            <li style="padding-bottom: 10px">Delete their own dcat sources</li>

                            <li>Edit other user's dcat sources</li>
                            <li>Delete other user's dcat sources</li>
                            <li>Add user</li>
                            <li>Edit user</li>
                            <li>Delete user</li>


                        </ul>

                    </td>
                </tr>
            </table>

            <p>After filling in the form, press the save button to add the user to the system.</p>

            <h3>Edit a user</h3>

            <p>To edit a user, click the edit button next to the user. The form on the left will now show the user's information.</p>


            <img src="images/userAdmin2.png" style="width: 100%"/>

            <p>You can now change everything expect for the username and click "Save" to save the changes.</p>

            <h3>Delete a user</h3>

            <p>To delete a user, click to "x" next to the user. A user can only be deleted if all their registered sources are deleted first.</p>


        </div>

        <div class="col-xs-12 col-md-3 push-md-9 bd-sidebar hidden-print hidden-sm-down" style="position:fixed">


            <nav id="myScrollspy">
                <ul class="nav nav-pills nav-stacked">
                    <li>
                        <a href="#Login">Login</a>
                    </li>
                    <li>
                        <a href="#Add-data-source">Add data source</a>
                    </li>
                    <li>
                        <a href="#Monitor-harvest-status">Monitor harvest status</a>
                    </li>
                    <li>
                        <a href="#Understand-errors">Understand errors</a>
                    </li>
                    <li>
                        <a href="#Errors-in-Kibana">Errors in Kibana</a>
                    </li>
                    <li>
                        <a href="#User-management">User management</a>
                    </li>
                </ul>
            </nav>
        </div>

    </div>


    <hr>

    <footer>
        <p>&copy; DIFI 2016</p>
    </footer>
</div> <!-- /container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js" integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB" crossorigin="anonymous"></script>
<script src="js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>
